#! /usr/bin/env nextflow

conda.enabled = true


profiles {
    standard {
        process.executor = 'local'
    }

    crick {
        process {
            executor = "slurm"
            clusterOptions = "--partition=compute"
            queueSize = 20 //prevent overloading the cluster with jobs
            scratch = true // enable scratch dir - each node on crick has 1TB storage.
            withLabel: largecpu_largemem {
                cpus = 64
                memory = '128GB'
            }
            withLabel: medmem {
                cpus: 4
                memory = '16GB'
            }
        }
    }
}

//eventually move these to base.conf

//eventually we can also have a config option cache dir and data dir again thaat by default are empty, so you dont need to specifyt the full fp of a cache file if they are all stored in sample place?
params {
    //maybe we want to make this a command line argument? manifest = '/home/crk_w20032671/ProCogGraphData/partial_manifest.csv' required on command line
    //optionally specify a directory for cache and data files (default = '' - so need to specify full path for each file)
    data_dir = ''
    cache_in = ''
    //directory to publish output files
    publish_dir = 'test_out' //specify a directory to publish output files on command line to overwrite this

    //directory to store cacheable files between runs e.g. cognate ligands and parity scores - used as storeDir in workflow
    cache_out = 'cache_out' //specify on command line to overwrite default

    //specifying these files additionally for extra cache to speed up operation - these are not workflow outputs, but reduce dependency on API calls etc
    glycoct_cache = '${cache_in}/glycoct_cache.pkl'
    smiles_cache = '${cache_in}/smiles_cache.pkl'
    csdb_linear_cache = '${cache_in}/csdb_linear_cache.pkl'
    parity_cache = '${cache_in}/cache_parity_calcs.pkl'
    kegg_enzyme_cache = '${cache_in}/kegg_enzyme_strings.txt'
    kegg_reaction_cache = '${cache_in}/kegg_reaction_strings.txt'
    kegg_compound_cache_dir = '${cache_in}/kegg_compound_cache_dir'
    glytoucan_cache = '${cache_in}/gtc_cache.pkl'
    
    //workflow specific parameters
    parity_threshold = 0.4
    domain_contact_cutoff = 3

    //paths to data files required for the workflow
    
    rhea_reactions = '${data_dir}/rhea_reactions.pkl'
    enzyme_dat_file = '${data_dir}/enzyme.dat'
    enzyme_class_file = '${data_dir}/enzclass.txt'
    scop_domains_info_file = '${data_dir}/dir.cla.scop.1_75.txt'
    scop_descriptions_file = '${data_dir}/dir.des.scop.1_75.txt'
    interpro_xml = '${data_dir}/interpro.xml.gz'
    pfam_clans = '${data_dir}/clan.txt.gz'
    pfam_clan_rels = '${data_dir}/clan_membership.txt.gz'
    pfam_a_file = '${data_dir}/pfamA.txt.gz'
    cddf = '${data_dir}/cath-domain-description-file.txt'
    ccd_cif = '${data_dir}/ccd.cif'
    pubchem_mapping = '${data_dir}/pubchem_substance_id_mapping.txt'
    chebi_kegg = '${data_dir}/ChEBI_Results.tsv'
    chebi_relations = '${data_dir}/relation.tsv'
    chebi_names = '${data_dir}/chebi_names.tsv.gz'
    brenda_ligands = '${data_dir}/brenda_ligands_2023_1.csv'
    brenda_mol_dir = '${data_dir}/molfiles_in_2023_1'
    brenda_json = '${data_dir}/brenda_2023_1.json'
    rhea2ec = '${data_dir}/rhea2ec.tsv'
    rhea_directions = '${data_dir}/rhea-directions.tsv'
    rhea_reactions_smiles = '${data_dir}/rhea-reaction-smiles.tsv'
    rhea_rd_dir = '${data_dir}/rd'
}